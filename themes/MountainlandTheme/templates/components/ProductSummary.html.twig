{% set accordionItems = [] %}
{% if highlights is defined and highlights|length > 0 %}
    {% set accordionItems = accordionItems|merge([{
        title: 'Product Highlights',
        list: highlights,
        open: true
    }]) %}
{% endif %}
{% if specs %}
    {% set accordionItems = accordionItems|merge([{ title: 'Specs', content: specs }]) %}
{% endif %}
{% if videos %}
    {% set accordionItems = accordionItems|merge([{ title: 'Videos', content: videos }]) %}
{% endif %}
{% if contacts is defined and contacts|length > 0 %}
    {% set accordionItems = accordionItems|merge([{
        title: 'Contact',
        template: 'components/AccordionContacts.html.twig',
        context: { contacts: contacts }
    }]) %}
{% endif %}
{% if shippingPolicy %}
    {% set accordionItems = accordionItems|merge([{ title: 'Shipping Policies', content: shippingPolicy }]) %}
{% endif %}

<div class="space-y-4">
    <h2 class="text-2xl font-bold mcs-primary-text">{{ name|default('Product Name') }}</h2>
    {% if description %}
        <div class="text-gray-600 leading-relaxed">{{ description|raw }}</div>
    {% endif %}

    <twig:ProductAvailability
        :productId="productId ?? null"
        :upc="upc ?? null"
        :stockHome="stockHome ?? null"
        :stockOther="stockOther ?? null"
    />

    <twig:ProductPrice
        :productId="productId ?? null"
    />

    <twig:ProductActions
        :quantity="quantity|default(1)"
        addToCartText="{{ addToCartText|default('Add to Cart') }}"
        :cartProductId="cartProductId ?? null"
        cartUom="{{ cartUom|default('ea') }}"
    />

    <twig:Accordion :items="accordionItems" />
</div>
