{% set accordionItems = [] %}

{% if description %}
    {% set accordionItems = accordionItems|merge([{
        title: 'Description',
        content: description,
        open: true
    }]) %}
{% endif %}
{% if highlights is defined and highlights|length > 0 %}
    {% set accordionItems = accordionItems|merge([{
        title: 'Features',
        list: highlights
    }]) %}
{% endif %}
{% if specs %}
    {% set accordionItems = accordionItems|merge([{ title: 'Product Highlights', content: specs }]) %}
{% endif %}
{% if width is not null or length is not null or height is not null or weight is not null %}
    {% set dimensionsContent = '' %}
    {% if width is not null %}
        {% set dimensionsContent = dimensionsContent ~ '<div><strong>Width:</strong> ' ~ width ~ '</div>' %}
    {% endif %}
    {% if length is not null %}
        {% set dimensionsContent = dimensionsContent ~ '<div><strong>Length:</strong> ' ~ length ~ '</div>' %}
    {% endif %}
    {% if height is not null %}
        {% set dimensionsContent = dimensionsContent ~ '<div><strong>Height:</strong> ' ~ height ~ '</div>' %}
    {% endif %}
    {% if weight is not null %}
        {% set dimensionsContent = dimensionsContent ~ '<div><strong>Weight:</strong> ' ~ weight ~ '</div>' %}
    {% endif %}
    {% set accordionItems = accordionItems|merge([{ title: 'Specifications', content: dimensionsContent }]) %}
{% endif %}
{% if videos %}
    {% set accordionItems = accordionItems|merge([{ title: 'Videos', content: videos }]) %}
{% endif %}
{% if contacts is defined and contacts|length > 0 %}
    {% set accordionItems = accordionItems|merge([{
        title: 'Contact',
        template: 'components/AccordionContacts.html.twig',
        context: { contacts: contacts }
    }]) %}
{% endif %}
{% if shippingPolicy %}
    {% set accordionItems = accordionItems|merge([{ title: 'Shipping Policies', content: shippingPolicy }]) %}
{% endif %}

<div class="space-y-4">
    <h2 class="text-2xl font-bold mcs-primary-text">{{ name|default('Product Name') }}</h2>

    <div class="text-3xl font-bold text-gray-900">{{ price|default('$999.99') }}</div>

    <twig:ProductActions
        :quantity="quantity|default(1)"
        addToCartText="{{ addToCartText|default('Add to Cart') }}"
        :cartProductId="cartProductId ?? null"
        cartUom="{{ cartUom|default('ea') }}"
    />

    <twig:ProductAvailability
        :productId="productId ?? null"
        :modelNumber="modelNumber ?? null"
        :upc="upc ?? null"
        :stockHome="stockHome ?? null"
        :stockOther="stockOther ?? null"
        :price="price ?? null"
    />

    <twig:Accordion :items="accordionItems" />
</div>
