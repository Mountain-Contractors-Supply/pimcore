{% extends '/checkout/checkout.html.twig' %}

{% block checkout_step %}
    <section class="checkout-step-panel is-active" data-step="overview" data-controller="checkout">
        <article class="card">
            <div id="saved-address-section" class="form-group" data-checkout-target="savedAddressSection">
                <label for="{{ form.shippingAddressId.vars.id }}">Shipping address</label>
                {{ form_widget(form.shippingAddressId, { attr: { id: 'saved-addresses' } }) }}
                {{ form_errors(form.shippingAddressId) }}
            </div>

            <div class="form-group form-inline">
                {{ form_row(form.addNewAddress, {
                    label: 'Add new address',
                    attr: {
                        id: 'add-new-address',
                        'data-checkout-target': 'checkbox',
                        'data-action': 'change->checkout#toggle'
                    }
                }) }}
            </div>

            <div id="new-address-section"
                 class="new-address-form"
                 style="display: none;"
                 data-checkout-target="newAddressSection">
                {% include 'partials/_address.html.twig' with { addressForm: form.address } %}
            </div>
        </article>

        <article class="card">
            <h3>Shipping method</h3>
            <div class="form-group">
                {% for choice in form.shipMethodCode %}
                    <label class="option-row">
                        {{ form_widget(choice) }}
                        <span>{{ choice.vars.label }}</span>
                        <span class="option-amount">
                            $0.00
{#                        ${{ shipMethod.cost|default(0)|number_format(2, '.', ',') }}#}
                        </span>
                    </label>
                {% endfor %}

                {{ form_errors(form.shipMethodCode) }}
            </div>
        </article>

        <article class="card">
            <div class="form-group">
                <label for="{{ form.requireDate.vars.id }}">Requested ship date</label>
                {{ form_widget(form.requireDate, { attr: { id: 'requested-date' } }) }}
                {{ form_errors(form.requireDate) }}
            </div>
        </article>

        <article class="card">
            <h3>Customer information</h3>
            <div class="form-grid">
                <div class="form-group">
                    <label for="{{ form.attention.vars.id }}">Attention</label>
                    {{ form_widget(form.attention, { attr: { id: 'attention', placeholder: 'Attention' } }) }}
                    {{ form_errors(form.attention) }}
                </div>

                <div class="form-group">
                    <label for="{{ form.phone.vars.id }}">Phone Number</label>
                    {{ form_widget(form.phone, { attr: { id: 'phone', placeholder: '+1 (555) 123-4567', maxlength: 17 } }) }}
                    {{ form_errors(form.phone) }}
                </div>

                <div class="form-group">
                    <label for="{{ form.companyName.vars.id }}">Company Name</label>
                    {{ form_widget(form.companyName, { attr: { id: 'company', placeholder: 'Company' } }) }}
                    {{ form_errors(form.companyName) }}
                </div>

                <div class="form-group">
                    <label for="{{ form.email.vars.id }}">Email</label>
                    {{ form_widget(form.email, { attr: { id: 'email', placeholder: 'name@example.com' } }) }}
                    {{ form_errors(form.email) }}
                </div>

                <div class="form-group">
                    <label for="{{ form.poNumber.vars.id }}">PO Number</label>
                    {{ form_widget(form.poNumber, { attr: { id: 'po-number', placeholder: 'PO Number' } }) }}
                    {{ form_errors(form.poNumber) }}
                </div>

                <div class="form-group">
                    <label for="{{ form.jobReference.vars.id }}">Job Reference</label>
                    {{ form_widget(form.jobReference, { attr: { id: 'job-ref', placeholder: 'Job Reference' } }) }}
                    {{ form_errors(form.jobReference) }}
                </div>
            </div>
        </article>
    </section>
{% endblock %}